{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/rudrapatole/Desktop/Kifaayat/app/context/CartContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\n\n// Define the shape of a Cart Item\nexport interface CartItem {\n    id: number;\n    name: string;\n    price: string; // Keeping as string for now to match mock data (e.g. \"â‚¹2,450\")\n    rawPrice: number; // For calculations\n    image: string;\n    category: string;\n    tag: string;\n    isUnique: boolean;\n}\n\ninterface CartContextType {\n    items: CartItem[];\n    addToCart: (item: CartItem) => void;\n    removeFromCart: (id: number) => void;\n    cartCount: number;\n    isOpen: boolean;\n    setIsOpen: (isOpen: boolean) => void;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport function CartProvider({ children }: { children: React.ReactNode }) {\n    const [items, setItems] = useState<CartItem[]>([]);\n    const [isOpen, setIsOpen] = useState(false);\n\n    // Load from local storage on mount\n    useEffect(() => {\n        const savedCart = localStorage.getItem('kifaayat_cart');\n        if (savedCart) {\n            try {\n                setItems(JSON.parse(savedCart));\n            } catch (e) {\n                console.error(\"Failed to parse cart data\", e);\n            }\n        }\n    }, []);\n\n    // Save to local storage whenever items change\n    useEffect(() => {\n        localStorage.setItem('kifaayat_cart', JSON.stringify(items));\n    }, [items]);\n\n    const addToCart = (newItem: CartItem) => {\n        setItems((prevItems) => {\n            // If item is unique, check if it already exists\n            if (newItem.isUnique) {\n                const exists = prevItems.find((item) => item.id === newItem.id);\n                if (exists) return prevItems; // Don't add if unique and already there\n            }\n            // For now, simplicity: just add to array (no qty > 1 logic yet for this simplified versions)\n            // If we wanted quantity, we'd check ID and increment a qty field.\n            // But requirement is \"Quantity = 1\" for unique items. \n            // We'll simplisticly assume everything is quantity 1 for now or check duplication.\n\n            // Check if already in cart to prevent duplicates for unique items\n            if (prevItems.some(item => item.id === newItem.id)) {\n                return prevItems;\n            }\n\n            return [...prevItems, newItem];\n        });\n        setIsOpen(true); // Open cart sidebar or notify (optional, for now just tracking state)\n    };\n\n    const removeFromCart = (id: number) => {\n        setItems((prevItems) => prevItems.filter((item) => item.id !== id));\n    };\n\n    const cartCount = items.length;\n\n    return (\n        <CartContext.Provider value={{ items, addToCart, removeFromCart, cartCount, isOpen, setIsOpen }}>\n            {children}\n        </CartContext.Provider>\n    );\n}\n\nexport function useCart() {\n    const context = useContext(CartContext);\n    if (context === undefined) {\n        throw new Error('useCart must be used within a CartProvider');\n    }\n    return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAyBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACpE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACjD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,mCAAmC;IACnC,IAAA,kNAAS,EAAC;QACN,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACX,IAAI;gBACA,SAAS,KAAK,KAAK,CAAC;YACxB,EAAE,OAAO,GAAG;gBACR,QAAQ,KAAK,CAAC,6BAA6B;YAC/C;QACJ;IACJ,GAAG,EAAE;IAEL,8CAA8C;IAC9C,IAAA,kNAAS,EAAC;QACN,aAAa,OAAO,CAAC,iBAAiB,KAAK,SAAS,CAAC;IACzD,GAAG;QAAC;KAAM;IAEV,MAAM,YAAY,CAAC;QACf,SAAS,CAAC;YACN,gDAAgD;YAChD,IAAI,QAAQ,QAAQ,EAAE;gBAClB,MAAM,SAAS,UAAU,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,QAAQ,EAAE;gBAC9D,IAAI,QAAQ,OAAO,WAAW,wCAAwC;YAC1E;YACA,6FAA6F;YAC7F,kEAAkE;YAClE,uDAAuD;YACvD,mFAAmF;YAEnF,kEAAkE;YAClE,IAAI,UAAU,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,QAAQ,EAAE,GAAG;gBAChD,OAAO;YACX;YAEA,OAAO;mBAAI;gBAAW;aAAQ;QAClC;QACA,UAAU,OAAO,sEAAsE;IAC3F;IAEA,MAAM,iBAAiB,CAAC;QACpB,SAAS,CAAC,YAAc,UAAU,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IACnE;IAEA,MAAM,YAAY,MAAM,MAAM;IAE9B,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAW;YAAgB;YAAW;YAAQ;QAAU;kBACzF;;;;;;AAGb;AAEO,SAAS;IACZ,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX"}}]
}